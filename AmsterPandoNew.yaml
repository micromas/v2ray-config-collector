# ────────────────────────────────────────────────────────────────────────────────
# 1️⃣  Общие параметры
# ────────────────────────────────────────────────────────────────────────────────
port: 7893
socks-port: 7894
redir-port: 7895
allow-lan: true
mode: Rule
log-level: info
external-controller: 127.0.0.1:9191

# ────────────────────────────────────────────────────────────────────────────────
# 2️⃣  Провайдеры прокси
# ────────────────────────────────────────────────────────────────────────────────
proxy-providers:
  socks5-provider:
    type: http                     # <-- http, чтобы поддерживать health-check
    url: https://example.com/socks5-proxies.yml
    interval: 3600000
    health-check:
      health-check-interval: 300000   # проверка каждые 5 минут
      health-check-url: https://www.gstatic.com/generate_204
      health-check-tls: true
      health-check-allow-redirects: false
      health-check-allow-ssl-verify: true

# ────────────────────────────────────────────────────────────────────────────────
# 3️⃣  Группы прокси
# ────────────────────────────────────────────────────────────────────────────────
proxy-groups:
  - name: Auto
    type: url-test
    url: https://www.gstatic.com/generate_204
    interval: 180000
    tolerance: 2000
    proxies:
      - socks5-provider

# ────────────────────────────────────────────────────────────────────────────────
# 4️⃣  Правила
# ────────────────────────────────────────────────────────────────────────────────
rules:
  - MATCH, Auto
